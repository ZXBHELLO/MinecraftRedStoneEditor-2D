<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft RedStone Editor</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 资源加载指示器 -->
    <div class="loader" id="resource-loader">
        <div class="loader-spinner"></div>
        <div class="loader-text">正在加载红石组件资源...</div>
        <div class="loader-progress">
            <div class="loader-progress-bar" id="progress-bar"></div>
        </div>
    </div>
   
    <!-- 资源缺失提示 -->
    <div class="resource-error" id="resource-error">
        <h2><i class="fas fa-exclamation-triangle"></i> 资源加载错误</h2>
        <p>无法加载红石组件资源。请确保您的本地文件结构包含一个名为 <code>assets</code> 的文件夹，其中包含所有必要的红石组件图片。</p>
        <p>文件结构应如下所示：</p>
        <pre style="background: var(--tile); padding: 15px; border-radius: 8px; margin: 15px 0; text-align: left; max-width: 80%;">
your-project/
├── index.html
└── assets/
    ├── air.webp
    ├── sand.webp
    ├── smoothstone.webp
    ...（所有其他红石组件图片）
        </pre>
        <p>如果您还没有这些资源，请下载完整的资源包并解压到项目目录中。</p>
        <button class="btn primary-btn" id="reload-btn" style="margin-top: 20px;">
            <i class="fas fa-sync-alt"></i> 重新加载
        </button>
    </div>
   
    <div class="title-decoration"></div>
   
    <!-- 顶部标题栏 -->
    <div class="header">
        <div class="logo">
            <h1>RedStone Editor</h1>
        </div>
        <div class="controls">
            <!-- 主题按钮 -->
            <button class="btn" id="theme-toggle">
                <i class="fas fa-moon"></i> <span>主题</span>
            </button>
            <button class="btn" id="clear-btn">
                <i class="fas fa-broom"></i> <span>清空</span>
            </button>
            <button class="btn" id="save-btn">
                <i class="fas fa-save"></i> <span>导出</span>
            </button>
            <button class="btn" id="load-btn">
                <i class="fas fa-folder-open"></i> <span>导入</span>
            </button>
            <button class="btn" id="help-btn">
                <i class="fas fa-question-circle"></i> <span>帮助</span>
            </button>
        </div>
    </div>
   
    <!-- 主内容区 -->
    <div class="main-container">
        <!-- 左侧组件面板 -->
        <div id="components-panel">
            <div class="panel-header">
                <h2><i class="fas fa-cubes"></i> 组件库</h2>
            </div>
           
            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="component-search" placeholder="搜索组件（中文/拼音/英文）">
            </div>
            <div id="components-list">
                <!-- 组件分类将在这里动态生成 -->
            </div>
        </div>
       
        <!-- 右侧画布区域 -->
        <div id="canvas-container">
            <canvas id="canvas"></canvas>
            <!-- 缩放控件 -->
            <div class="zoom-controls">
                <button class="zoom-btn" id="zoom-out" title="缩小">
                    <i class="fas fa-search-minus"></i>
                </button>
                <button class="zoom-btn" id="zoom-reset" title="重置缩放">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <button class="zoom-btn" id="zoom-in" title="放大">
                    <i class="fas fa-search-plus"></i>
                </button>
            </div>
        </div>
    </div>
   
    <!-- 状态栏 -->
    <div class="status-bar">
        <div class="status-item" id="block-count">
            <i class="fas fa-cube"></i> <span>已放置: 0 个组件</span>
        </div>
        <div class="status-item" id="current-component">
            <i class="fas fa-mouse-pointer"></i> <span>当前: 空气</span>
        </div>
        <div class="status-item" id="cursor-position">
            <i class="fas fa-crosshairs"></i> <span>坐标: 0, 0</span>
        </div>
        <div class="status-item" id="canvas-scale">
            <i class="fas fa-search"></i> <span>缩放: 100%</span>
        </div>
        <div class="status-item" id="theme-display">
            <i class="fas fa-adjust"></i> <span>模式: 日间模式</span>
        </div>
    </div>
   
    <!-- 保存模态框 -->
    <div class="modal" id="save-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-save"></i> 保存设计</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label for="design-name"><i class="fas fa-tag"></i> 设计名称</label>
                    <input type="text" id="design-name" placeholder="输入设计名称">
                </div>
                <div class="input-group">
                    <label for="design-description"><i class="fas fa-align-left"></i> 描述 (可选)</label>
                    <input type="text" id="design-description" placeholder="输入设计描述">
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn secondary-btn close-modal">
                    <i class="fas fa-times"></i> 取消
                </button>
                <button class="modal-btn primary-btn" id="confirm-save">
                    <i class="fas fa-save"></i> 保存设计
                </button>
            </div>
        </div>
    </div>
   
    <!-- 导入模态框 -->
    <div class="modal" id="load-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-folder-open"></i> 导入设计</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="file-upload">
                    <div class="file-drop-area" id="file-drop-area">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <div class="file-drop-text">拖放设计文件到这里</div>
                        <div class="file-drop-hint">或点击选择文件</div>
                    </div>
                    <input type="file" id="load-file" accept=".json" style="display: none;">
                </div>
                <div class="load-status" id="load-status">
                    <i class="fas fa-info-circle"></i> 请选择或拖放JSON设计文件
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn secondary-btn close-modal">
                    <i class="fas fa-times"></i> 取消
                </button>
                <button class="modal-btn primary-btn" id="confirm-load">
                    <i class="fas fa-file-import"></i> 导入设计
                </button>
            </div>
        </div>
    </div>
   
    <!-- 清空确认模态框 -->
    <div class="modal" id="clear-confirm-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-broom"></i> 清空画布</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="confirmation-message">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p>确定要清空整个画布吗？</p>
                    <p>此操作将<strong class="warning-text">永久移除</strong>所有已放置的组件且无法撤销。</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn secondary-btn close-modal">
                    <i class="fas fa-times"></i> 取消
                </button>
                <button class="modal-btn primary-btn" id="confirm-clear">
                    <i class="fas fa-check"></i> 确认清空
                </button>
            </div>
        </div>
    </div>
   
    <!-- 帮助模态框 -->
    <div class="modal" id="help-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-question-circle"></i> 使用帮助</h2>
            <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <div class="help-content">
                <h3><i class="fas fa-mouse-pointer"></i> 基本操作</h3>
                <ul>
                    <li>从左侧面板选择组件</li>
                    <li>在画布上点击放置组件</li>
                    <li>再次点击同一位置可移除组件</li>
                    <li>使用鼠标中键拖拽移动画布</li>
                    <li>使用滚轮缩放画布</li>
                </ul>
                <h3><i class="fas fa-search"></i> 搜索功能</h3>
                <ul>
                    <li>支持中文名称搜索（如"红石"）</li>
                    <li>支持拼音搜索（如"hongshi"）</li>
                    <li>支持拼音首字母搜索（如"hs"）</li>
                    <li>支持英文名称搜索（如"redstone"）</li>
                </ul>
               
                <h3><i class="fas fa-search"></i> 缩放控制</h3>
                <ul>
                    <li><i class="fas fa-search-plus"></i> 放大视图</li>
                    <li><i class="fas fa-search-minus"></i> 缩小视图</li>
                    <li><i class="fas fa-sync-alt"></i> 重置缩放</li>
                </ul>
               
                <h3><i class="fas fa-user"></i> 项目信息</h3>
                <ul>
                    <li>项目版本：1.3</li>
                    <li>BILIBILI：<a href="https://space.bilibili.com/1917782316" target="_blank">ZXBHELLO</a></li>
                    <li>E-MAIL：<a href="mailto:ZXBHELLO@GMAIL.COM">ZXBHELLO@GMAIL.COM</a></li>
                    <li>GITHUB：<a href="https://github.com/ZXBHELLO/MinecraftRedStoneEditor-2D" target="_blank">MinecraftRedStoneEditor</a></li>
                    <li>遇到错误？缺少组件？提供想法？<br>
                        请前往：<a href="https://github.com/ZXBHELLO/MinecraftRedStoneEditor-2D/issues" target="_blank">项目提议</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="modal-footer">
            <button class="modal-btn primary-btn close-modal">
                <i class="fas fa-check"></i> 我明白了
            </button>
        </div>
    </div>
</div>
    <script type="module" src="main.js"></script>
</body>
</html>
